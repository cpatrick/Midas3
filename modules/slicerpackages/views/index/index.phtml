<?php
/*=========================================================================
MIDAS Server
Copyright (c) Kitware SAS. 20 rue de la Villette. All rights reserved.
69328 Lyon, FRANCE.

See Copyright.txt for details.
This software is distributed WITHOUT ANY WARRANTY; without even
the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the above copyright notices for more information.
=========================================================================*/
?>
<?php
$this->headScript()->appendFile(
  $this->apiWebroot . '/public/js/common/common.ajaxapi.js');
$this->headScript()->appendFile(
  $this->moduleWebroot . '/public/js/index/slicerpackages.index.js');
?>
<link type="text/css" rel="stylesheet" href="<?php echo $this->moduleWebroot.'/public/css/'.$this->moduleName ?>.index.css" />
<div class="viewMain">
  <div>
<?php
  foreach($this->packageSets as $folderName => $packageSuperset)
    {
    echo '<div class="releasefolder">';
    echo '  <h3>'.$folderName.'</h3>';
    foreach($packageSuperset as $os => $packageSet)
      {
      echo '  <div class="packageTile '.$os.'">';
      if($os == 'win')
        {
        echo '    <div>Windows</div>';
        }
      elseif($os == 'macosx')
        {
        echo '    <div>Mac OSX</div>';
        }
      else
        {
        echo '    <div>Linux</div>';
        }
      echo '<div class="packageLinks">';
      foreach($packageSet as $name => $package)
        {
        $friendlyArch = '64-bit';
        if($package->getArch() == 'i386')
          {
          $friendlyArch = '32-bit';
          }
        echo '    <a href='.$this->webroot.'/download/?items='.$package->getItemId().'>Download '.$friendlyArch.'</a><br/>';
        }
      echo '  </div>';
      echo '  </div>';
      }
    echo '</div>';
    }
?>
  </div>
</div>

<?php echo $this->render('index/viewsidebar.phtml'); ?>

